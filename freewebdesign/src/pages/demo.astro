---
import { Image } from "astro:assets"
import profile from "@img/profile.png"
import Layaout from "../layouts/Layout.astro"
---

<Layaout title="Agency date">
	<main class="mt-24 w-full flex justify-center">
		<div
			class="w-[1024px] grid grid-cols-6 grid-rows-1 gap-0 shadow-xl rounded-xl"
		>
			<section class="border-r-2 p-10 col-span-2">
				<figure class="flex flex-col gap-2">
					<Image src={profile} alt="Profile " class="w-20 h-20 rounded-full" />

					<figcaption>
						<h2 class="font-medium">Eduardo Lop√©z</h2>
						<h3 class="font-bold text-2xl">15 Minute Demo with Eduardo</h3>
					</figcaption>
				</figure>
				<span>15 min</span>
			</section>
			<section class="rounded-xl col-span-4 p-10 flex flex-col gap-4">
				<h2 class="text-xl font-bold">Select a Date & Time</h2>
				<div class="grid grid-cols-6 grid-rows-1 gap-x-2">
					<div class="flex col-span-4">
						<div
							class="grid grid-cols-7 grid-rows-5 gap-x-4 gap-y-2 text-center"
							id="calendar"
						>
						</div>
					</div>
					<div class="flex col-span-2 overflow-y-scroll">horario</div>
				</div>
				<div>
					<h4>Time zone</h4>
					<p>Central European time</p>
				</div>
			</section>
		</div>
	</main>
</Layaout>

<script>
	const today = new Date()
	let currentMonth = today.getMonth()
	let currentYear = today.getFullYear()

	const generateCalendar = () => {
		const calendar = document.getElementById("calendar")
		if (!calendar) {
			throw new Error("Calendar not found")
		}
		const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate()
		const firstDay = new Date(currentYear, currentMonth, 1).getDay()
		const lastDay = new Date(currentYear, currentMonth, daysInMonth).getDay()

		//--- days---

		const daysOfWeek = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]

		daysOfWeek.forEach((day) => {
			const span = document.createElement("span")
			span.textContent = day
			span.classList.add()
			calendar.appendChild(span)
		})

		for (let i = 1; i < firstDay; i++) {
			const span = document.createElement("span")
			span.classList.add("text-gray-400")
			calendar.appendChild(span)
		}
		const today = new Date().getDate()
		for (let i = 1; i <= daysInMonth; i++) {
			const button = document.createElement("button")
			button.textContent = i.toString()
			button.classList.add(
				"flex-1",
				"shadow-md",
				"rounded-full",
				"w-10",
				"h-10",
				"font-bold",
				"text-lg"
			)
			if (i < today) {
				button.classList.add("text-gray-400")
				button.disabled = true
			} else if (i === today) {
				button.classList.add("bg-blue-500", "text-white", "shadow-xl")
			} else {
				button.classList.add("bg-blue-50", "shadow-none", "text-blue-500" ,"transition-all", "hover:bg-blue-100")
			}

			calendar.appendChild(button)
		}
	}
	generateCalendar()
</script>
